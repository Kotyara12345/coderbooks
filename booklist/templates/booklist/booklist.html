{% extends 'base.html' %}
{% load static %}
<title>{% block title %}CoderBooks учебная литература для программистов{% endblock %} | CoderBooks</title>
{% block content %} 
<h1>Книги по программированию и IT</h1>
<div class="nh_filter js-accordion">
    <div class="nh_button js-accordion-title">Фильтрация</div>
    <div class="js-accordion-body">
        <div class="nh_filter-content">
            <form class="nh_filter-form" method="GET">
                <label>
                    {% csrf_token %}
                    {{ form.as_p }}
                <button class="nh_button" type="submit">Фильтровать</button>
            </form>
        </div>
    </div>
</div>
<div class="nh_content-list">
{% for book in page_object %}
<div class="nh_content-list-item">
    <a href="{{ book.get_absolute_url }}"class="nh_item-image">
        <img src="{{ book.img_file.url }}">
    </a>
    <div class="nh_item-content">
        <a href="{{ book.get_absolute_url }}" class="nh_item-title">
            <h2>{{ book.title }} - {{ book.author_book }}</h2>
        </a>
        <div>
            <div class="nh_item-date">
                <div class="nh_item-date-block">
                    <svg><use xlink:href="#icon-calendar"></use></svg>
                    <span>{{ book.release_date }}</span>
                </div>
                <div class="nh_item-date-block">
                    <svg><use xlink:href="#icon-folder"></use></svg>
                    <a href="{{ category.get_absolute_url }}">{{ book.category.first }}</a>
                </div>
                <div class="nh_item-date-block">
                    <svg><use xlink:href="#icon-earth"></use></svg>
                    <span>{% if book.lang_category == 1 %}русский{% endif %}{% if book.lang_category == 2 %}english{% endif %}</span>
                </div>
            </div>
            <div class="nh_item-description">{% autoescape off %}{{ book.description|truncatewords:10 }}{% endautoescape %}</div>
            <a href="{{ book.get_absolute_url }}" class="nh_item-url">Перейти ></a>
        </div>
    </div>
</div>
{% endfor %}
</div>
{% if is_paginated %}
<div class="nh_pagination">
    <a class="nh_pagination-button {% if not prev_url %}disabled{% endif %}" href="{{ prev_url }}"><</a>

    {% for n in page_object.paginator.page_range %}
    {% if page_object.number == n %}

    <a class="nh_pagination-button active" href="?page={{ n }}">{{ n }}</a>
    {% elif n > page_object.number|add:-3 and n < page_object.number|add:3 %}

    <a class="nh_pagination-button" href="?page={{ n }}">{{ n }}</a>

    {% endif %}{% endfor %}

    <a class="nh_pagination-button {% if not next_url %}disabled{% endif %}" href="{{ next_url }}">></a>

</div>
{% endif %}

{% endblock %}
